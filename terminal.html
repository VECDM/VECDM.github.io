<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminale Simulato</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body {
            background-color: black;
            color: #d4a5a5; /* Grigio con tinta rosa */
            font-family: 'Courier New', Courier, monospace;
            padding: 20px;
        }
        #terminal {
            width: 100%;
            height: 300px;
            background-color: black;
            border: 1px solid #d4a5a5;
            padding: 10px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 14px;
        }
        #input-line {
            width: 100%;
            background-color: black;
            border: none;
            color: #d4a5a5;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            padding: 5px;
        }
        #input-line:focus {
            outline: none;
        }
    </style>
</head>
<body>

    <div id="terminal"></div>
    <input type="text" id="input-line" autofocus placeholder="Inserisci comando...">

    <script>
        (function() {
            emailjs.init("cazIbL20VzJml_-nQ"); // <-- Sostituisci con il tuo User ID
        })();

        let email = "";
        let message = "";
        const terminal = document.getElementById("terminal");
        const inputLine = document.getElementById("input-line");

        function printToTerminal(text, delay = 30) {
            let i = 0;
            let interval = setInterval(() => {
                if (i < text.length) {
                    terminal.innerHTML += text[i];
                    i++;
                } else {
                    clearInterval(interval);
                    terminal.innerHTML += "\n"; // Aggiunge una nuova riga dopo il messaggio
                    terminal.scrollTop = terminal.scrollHeight;
                }
            }, delay);
        }

        function processCommand(command) {
            if (command.startsWith("-email- ")) {
                email = command.replace("-email- ", "").trim();
                printToTerminal("> Email salvata: " + email);
            } else if (command.startsWith("-message- ")) {
                message = command.replace("-message- ", "").trim();
                printToTerminal("> Messaggio salvato: " + message);
            } else if (command === "-send-") {
                if (email && message) {
                    printToTerminal("> Invio in corso...");
                    sendEmail(email, message);
                } else {
                    printToTerminal("> Errore: Email o messaggio mancante.");
                }
            } else if (command === "-help-") {
                printToTerminal("> Comandi disponibili:\n -email- [tua_email]\n -message- [tuo messaggio]\n -send- (per inviare)");
            } else {
                printToTerminal("> Comando non riconosciuto. Usa -help- per la lista.");
            }
        }

        function sendEmail(email, message) {
            const templateParams = {
                user_email: email,
                user_message: message
            };

            emailjs.send("service_phc57e8", "template_xxxxxx", templateParams) // Sostituisci template_xxxxxx con il tuo template
                .then(() => {
                    printToTerminal("> Messaggio inviato con successo!");
                })
                .catch((error) => {
                    printToTerminal("> Errore nell'invio dell'email: " + error.text);
                });
        }

        inputLine.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                let command = inputLine.value.trim();
                inputLine.value = "";
                if (command) {
                    printToTerminal("> " + command);
                    processCommand(command);
                }
            }
        });

        // Messaggio iniziale
        setTimeout(() => printToTerminal("> Benvenuto nel terminale!\n> Usa -help- per la lista comandi."), 500);
    </script>

</body>
</html>
